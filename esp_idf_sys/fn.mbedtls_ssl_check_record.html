<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief          Check whether a buffer contains a valid and authentic record that has not been seen before. (DTLS only)."><meta name="keywords" content="rust, rustlang, rust-lang, mbedtls_ssl_check_record"><title>mbedtls_ssl_check_record in esp_idf_sys - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../esp_idf_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../esp_idf_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><div class="sidebar-elems"><h2 class="location"><a href="index.html">In esp_idf_sys</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../esp_idf_sys/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">mbedtls_ssl_check_record</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/esp_idf_sys/home/runner/work/esp-idf-svc/esp-idf-svc/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-16680997ab9ad3a2/out/bindings.rs.html#59413-59417">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust fn"><code>pub unsafe extern &quot;C&quot; fn mbedtls_ssl_check_record(<br>&nbsp;&nbsp;&nbsp;&nbsp;ssl: *const <a class="struct" href="struct.mbedtls_ssl_context.html" title="struct esp_idf_sys::mbedtls_ssl_context">mbedtls_ssl_context</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;buf: *mut <a class="type" href="c_types/type.c_uchar.html" title="type esp_idf_sys::c_types::c_uchar">c_uchar</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;buflen: <a class="type" href="type.size_t.html" title="type esp_idf_sys::size_t">size_t</a><br>) -&gt; <a class="type" href="c_types/type.c_int.html" title="type esp_idf_sys::c_types::c_int">c_int</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief          Check whether a buffer contains a valid and authentic record
that has not been seen before. (DTLS only).</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>            <span class="ident">This</span> <span class="ident">function</span> <span class="ident">does</span> <span class="ident">not</span> <span class="ident">change</span> <span class="ident">the</span> <span class="ident">user</span><span class="op">-</span><span class="ident">visible</span> <span class="ident">state</span>
            <span class="ident">of</span> <span class="ident">the</span> <span class="ident">SSL</span> <span class="ident">context</span>. <span class="ident">Its</span> <span class="ident">sole</span> <span class="ident">purpose</span> <span class="ident">is</span> <span class="ident">to</span> <span class="ident">provide</span>
            <span class="ident">an</span> <span class="ident">indication</span> <span class="ident">of</span> <span class="ident">the</span> <span class="ident">legitimacy</span> <span class="ident">of</span> <span class="ident">an</span> <span class="ident">incoming</span> <span class="ident">record</span>.

            <span class="ident">This</span> <span class="ident">can</span> <span class="ident">be</span> <span class="ident">useful</span> <span class="ident">e</span>.<span class="ident">g</span>. <span class="kw">in</span> <span class="ident">distributed</span> <span class="ident">server</span> <span class="ident">environments</span>
            <span class="ident">using</span> <span class="ident">the</span> <span class="ident">DTLS</span> <span class="ident">Connection</span> <span class="ident">ID</span> <span class="ident">feature</span>, <span class="kw">in</span> <span class="ident">which</span> <span class="ident">connections</span>
            <span class="ident">might</span> <span class="ident">need</span> <span class="ident">to</span> <span class="ident">be</span> <span class="ident">passed</span> <span class="ident">between</span> <span class="ident">service</span> <span class="ident">instances</span> <span class="ident">on</span> <span class="ident">a</span> <span class="ident">change</span>
            <span class="ident">of</span> <span class="ident">peer</span> <span class="ident">address</span>, <span class="ident">but</span> <span class="kw">where</span> <span class="ident">such</span> <span class="ident">disruptive</span> <span class="ident">operations</span> <span class="ident">should</span>
            <span class="ident">only</span> <span class="ident">happen</span> <span class="ident">after</span> <span class="ident">the</span> <span class="ident">validity</span> <span class="ident">of</span> <span class="ident">incoming</span> <span class="ident">records</span> <span class="ident">has</span> <span class="ident">been</span>
            <span class="ident">confirmed</span>.</code></pre></div>
<p>\param ssl      The SSL context to use.
\param buf      The address of the buffer holding the record to be checked.
This must be a read/write buffer of length \p buflen Bytes.
\param buflen   The length of \p buf in Bytes.</p>
<p>\note           This routine only checks whether the provided buffer begins
with a valid and authentic record that has not been seen
before, but does not check potential data following the
initial record. In particular, it is possible to pass DTLS
datagrams containing multiple records, in which case only
the first record is checked.</p>
<p>\note           This function modifies the input buffer \p buf. If you need
to preserve the original record, you have to maintain a copy.</p>
<p>\return         \c 0 if the record is valid and authentic and has not been
seen before.
\return         MBEDTLS_ERR_SSL_INVALID_MAC if the check completed
successfully but the record was found to be not authentic.
\return         MBEDTLS_ERR_SSL_INVALID_RECORD if the check completed
successfully but the record was found to be invalid for
a reason different from authenticity checking.
\return         MBEDTLS_ERR_SSL_UNEXPECTED_RECORD if the check completed
successfully but the record was found to be unexpected
in the state of the SSL context, including replayed records.
\return         Another negative error code on different kinds of failure.
In this case, the SSL context becomes unusable and needs
to be freed or reset before reuse.</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="esp_idf_sys" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-nightly (d394408fb 2022-08-07)" ></div></body></html>